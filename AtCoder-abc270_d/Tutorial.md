# 预期错误解法

不能采用“每回合尽可能多取石子”的贪心策略来解决这个问题。反例为：

10 3  
1 3 4  

让我们验证这确实是贪心算法的反例。如果高桥采用贪心策略，游戏进程的一个示例如下（这里高桥贪心地取石，但青木不一定如此，因此这只是一个示例）：

- 高桥取走 4 颗石子。  
- 青木取走 4 颗石子。  
- 高桥取走 1 颗石子。  
- 青木取走 1 颗石子。  

在这个例子中，由于青木的操作，高桥被迫只取走了 5 颗石子。然而，如果高桥第一次取走 3 颗石子，无论青木下一回合取走多少石子，高桥都可以在下一回合取走 3 颗或更多石子，因此他至少能取走 6 颗石子。

由此可见，根据 $\{A_i\}$ 和 $N$ 的不同，此问题可能需要复杂的策略。因此，我们考虑使用穷举搜索算法。

## 预期正确解法

这个问题可以通过以下动态规划（DP）解决：

$\text{DP}[n] = \text{如果游戏从一堆 } n \text{ 颗石子开始，先手玩家能取走的石子数量。}$

状态转移方程为：

$\text{DP}[n] = \max\{A_i + (n - A_i) - \text{DP}[n - A_i] \mid A_i \leq n\}.$

这个方程的含义是：如果先手玩家取走 $A_i$ 颗石子，那么他将获得 $A_i + (\text{如果游戏从一堆 } n - A_i \text{ 颗石子开始，后手玩家能取走的石子数量})$ 颗石子，因此所需的值是对所有 $i$ 取最大值的结果。

这个 DP 有 $O(N)$ 个状态，每个状态的转移需要 $O(K)$ 时间，因此我们可以在总共 $O(NK)$ 的时间内求出 $\text{DP}[N]$。